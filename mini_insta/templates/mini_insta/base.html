<!-- File: mini_insta/templates/mini_insta/base.html-->
<!-- Author: Louise Lee, llouise@bu.edu, 09/24/2025 -->
<!-- Description: Reusable, consistent structure with a navigation bar and a content block -->

{% load static %}
<html>
  <!-- Title and styling to apply -->
  <head>
    <title>MiniInsta</title>
    <link rel="stylesheet" href="{% static 'styles-insta.css' %}">
    <nav>
      <ul>
        <!-- Add URL for auth -->
        {% if request.user.is_authenticated %}
        <li>
          <form action="{%url 'logout' %}" method = "POST">
            {% csrf_token %}
            <button type="submit">
              Logout
            </button>
          </form>
        </li>
        {% else %}
        <li><a href="{% url 'login' %}?next={% url 'show_all_profiles' %}">Login</a></li>
        <hr>
        {% if request.user.is_authenticated %}
        Logged in as: {{request.user}}
        {% else %}
        Not logged in.
        {% endif %}
      </ul>
    </nav>
  </head>

  <!-- Content of other html -->
  <body>
    {% block content %}
    {% endblock %}

    <!-- Footer with show_all_profile again and profile image if on show_profile-->
    <div class = footer>
      <a href="{% url 'show_all_profiles' %}"> | 👥 All Profiles | </a>

      {% if request.user.is_authenticated %}
        <a href="{% url 'show_feed' %}">🏠 Feed |</a>
        <a href="{% url 'search' %}">🔎 Search |</a>
      {% endif %}

      {% if profile %}
        <a href="{% url 'show_profile' profile.pk %}">
          <img class="footer-pfp" src="{{ profile.profile_image_url }}" alt="Profile image">
        </a>

        <!-- {Show “Add Post” only when looking at your own profile -->
        {% if request.user.is_authenticated and profile.user == request.user %}
          <a href="{% url 'create_post' %}" class="footer-add-post"> | ➕ Add Post |</a>
        {% endif %}
      {% endif %}
    </div>
  </body>
</html>